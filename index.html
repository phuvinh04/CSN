<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <link rel="icon" type="image/x-icon" href="images/logo.jpg" />
    <title>PV GARDEN</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
</head>

<body class="bg-green-50 font-sans">
    <main class="container mx-auto px-4 py-8 mt-8">
        <h2 class="text-3xl font-bold text-green-800 mb-6">Sản phẩm nổi bật</h2>

        <div class="bg-[#f8f5ed] py-10">
            <h1 class="text-center text-xl font-bold text-green-800 mb-8">DANH MỤC SẢN PHẨM</h1>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 px-4">
               
                <!-- Cây văn phòng -->
                <a href="cay-van-phong.html" class="bg-white shadow-lg rounded-md overflow-hidden transition-transform hover:scale-105">
                    <img src="your-image-url-2.jpg" alt="Cây văn phòng" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h2 class="text-center text-green-800 font-semibold">CÂY VĂN PHÒNG</h2>
                    </div>
                </a>

                <!-- Cây phong thủy -->
                <a href="cay-phong-thuy.html" class="bg-white shadow-lg rounded-md overflow-hidden transition-transform hover:scale-105">
                    <img src="your-image-url-3.jpg" alt="Cây phong thủy" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h2 class="text-center text-green-800 font-semibold">CÂY PHONG THỦY</h2>
                    </div>
                </a>

                <!-- Cây để bàn -->
                <a href="cay-de-ban.html" class="bg-white shadow-lg rounded-md overflow-hidden transition-transform hover:scale-105">
                    <img src="your-image-url-4.jpg" alt="Cây để bàn" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h2 class="text-center text-green-800 font-semibold">CÂY ĐỂ BÀN</h2>
                    </div>
                </a>

                <!-- Cây trồng nước -->
                <a href="cay-trong-nuoc.html" class="bg-white shadow-lg rounded-md overflow-hidden transition-transform hover:scale-105">
                    <img src="your-image-url-5.jpg" alt="Cây trồng nước" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h2 class="text-center text-green-800 font-semibold">CÂY TRỒNG NƯỚC</h2>
                    </div>
                </a>

                <!-- Cây cao cấp -->
                <a href="cay-cao-cap.html" class="bg-white shadow-lg rounded-md overflow-hidden transition-transform hover:scale-105">
                    <img src="your-image-url-6.jpg" alt="Cây cao cấp" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h2 class="text-center text-green-800 font-semibold">CÂY CAO CẤP</h2>
                    </div>
                </a>

                <!-- Chậu đất nung -->
                <a href="chau-dat-nung.html" class="bg-white shadow-lg rounded-md overflow-hidden transition-transform hover:scale-105">
                    <img src="your-image-url-7.jpg" alt="Chậu đất nung" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h2 class="text-center text-green-800 font-semibold">CHẬU ĐẤT NUNG</h2>
                    </div>
                </a>

                <!-- Chậu xi măng -->
                <a href="chau-xi-mang.html" class="bg-white shadow-lg rounded-md overflow-hidden transition-transform hover:scale-105">
                    <img src="your-image-url-8.jpg" alt="Chậu xi măng" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h2 class="text-center text-green-800 font-semibold">CHẬU XI MĂNG</h2>
                    </div>
                </a>

                <!-- Kéo cắt cành -->
                <a href="keo-cat-canh.html" class="bg-white shadow-lg rounded-md overflow-hidden transition-transform hover:scale-105">
                    <img src="your-image-url-9.jpg" alt="Kéo cắt cành" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h2 class="text-center text-green-800 font-semibold">KÉO CẮT CÀNH</h2>
                    </div>
                </a>
            </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6" id="featured-products">
            <!-- Sản phẩm sẽ được thêm vào đây  -->
        </div>
    </main>

    <script src="include.js"></script>
    <script>
        // Tải và hiển thị sản phẩm nổi bật từ data.json
        async function loadFeaturedProducts() {
            try {
                const response = await fetch('data.json');
                const data = await response.json();
                const productList = document.getElementById('featured-products');
                
                // Chỉ hiển thị 10 sản phẩm đầu tiên làm sản phẩm nổi bật
                const featuredProducts = data.products.slice(0, 10);
                
                featuredProducts.forEach(product => {
                    const productCard = `
                        <div class="bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:scale-105 h-full flex flex-col">
                            <img alt="${product.name}" class="w-full h-48 object-cover" src="${product.image_url}"/>
                            <div class="p-4 flex flex-col h-full">
                                <h3 class="text-sm font-semibold text-green-800 mb-2 line-clamp-2">${product.name}</h3>
                                <p class="text-green-700 font-bold mt-auto mb-3">${product.price.toLocaleString('vi-VN')}đ</p>
                                <div class="flex gap-2">
                                    <button onclick="addToCart('${product.name}', ${product.price}, '${product.image_url}')" 
                                            class="flex-1 flex items-center justify-center bg-green-600 text-white py-2 px-2 rounded-md hover:bg-green-700 transition-colors text-sm">
                                        <i class="fas fa-cart-plus mr-1"></i>
                                        Thêm vào giỏ
                                    </button>
                                    <button onclick="window.location.href='product-detail.html?name=${encodeURIComponent(product.name)}'"
                                            class="flex-1 flex items-center justify-center bg-blue-600 text-white py-2 px-2 rounded-md hover:bg-blue-700 transition-colors text-sm">
                                        <i class="fas fa-info-circle mr-1"></i>
                                        Xem chi tiết
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                    productList.innerHTML += productCard;
                });
            } catch (error) {
                console.error('Lỗi khi tải sản phẩm:', error);
            }
        }

        // Hàm thêm vào giỏ hàng
        function addToCart(name, price, image_url) {
            let cart = JSON.parse(localStorage.getItem('cartItems')) || [];
            const productId = name.toLowerCase().replace(/\s+/g, '-'); // Tạo ID từ tên sản phẩm
            
            const existingProduct = cart.find(item => item.id === productId);
            
            if (existingProduct) {
                existingProduct.quantity += 1;
            } else {
                cart.push({
                    id: productId,
                    name: name,
                    price: price,
                    image: image_url,
                    quantity: 1
                });
            }
            
            localStorage.setItem('cartItems', JSON.stringify(cart));
            alert('Đã thêm sản phẩm vào giỏ hàng!');
        }

        async function loadCategoryImages() {
            try {
                const response = await fetch('data.json');
                const data = await response.json();
                const categoryImages = data.product_category_images;
                
                // Lấy tất cả các div danh mục
                const categoryDivs = document.querySelectorAll('.grid.grid-cols-1.md\\:grid-cols-2.lg\\:grid-cols-4.gap-6.px-4 img');
                
                // Gán hình ảnh trực tiếp theo index
                categoryDivs.forEach((img, index) => {
                    if (categoryImages[index]) {
                        img.src = categoryImages[index];
                        console.log(`Loading image ${index}:`, categoryImages[index]); // Debug log
                    } else {
                        console.error(`No image found for index ${index}`);
                    }
                });
            } catch (error) {
                console.error('Lỗi khi tải hình ảnh danh mục:', error);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadFeaturedProducts();
            loadCategoryImages();
        });
    </script>
</body>
</html>
